// This source code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// Â© sbtnc
// Created: 2019-01-05
// Last modified: 2023-05-05
// Version 2.0

// @version=5
indicator("Multiple Moving Averages", "MAs", true)


//--------------------------------------------------------------------
//#region                      Constants
//--------------------------------------------------------------------

var DEFAULT_LINEWIDTH   = 1
var DEFAULT_COLOR1      = color.new(#c9daf8, 0)
var DEFAULT_COLOR2      = color.new(#a4c2f4, 4)
var DEFAULT_COLOR3      = color.new(#6d9eeb, 8)
var DEFAULT_COLOR4      = color.new(#3c78d8, 12)
var DEFAULT_COLOR5      = color.new(#0b5394, 16)

//#endregion


//--------------------------------------------------------------------
//#region                        Inputs
//--------------------------------------------------------------------

// Groups

g1 = "#1"
g2 = "#2"
g3 = "#3"
g4 = "#4"
g5 = "#5"


// Inputs

i_type_1    = input.string  ("EMA", "Type", ["SMA", "EMA", "RMA", "VMA", "VWMA"],   group=g1)
i_length1   = input.int     (9,     "Length", 1,                                    group=g1)
i_source1   = input         (close, "Source",                                       group=g1)
i_offset1   = input.int     (0,     "Offset",                                       group=g1)

i_type_2    = input.string  ("EMA", "Type", ["SMA", "EMA", "RMA", "VMA", "VWMA"],   group=g2)
i_length2   = input.int     (20,    "Length", 1,                                    group=g2)
i_source2   = input         (close, "Source",                                       group=g2)
i_offset2   = input.int     (0,     "Offset",                                       group=g2)

i_type_3    = input.string  ("EMA", "Type", ["SMA", "EMA", "RMA", "VMA", "VWMA"],   group=g3)
i_length3   = input.int     (50,    "Length", 1,                                    group=g3)
i_source3   = input         (close, "Source",                                       group=g3)
i_offset3   = input.int     (0,     "Offset",                                       group=g3)

i_type_4    = input.string  ("EMA", "Type", ["SMA", "EMA", "RMA", "VMA", "VWMA"],   group=g4)
i_length4   = input.int     (100,   "Length", 1,                                    group=g4)
i_source4   = input         (close, "Source",                                       group=g4)
i_offset4   = input.int     (0,     "Offset",                                       group=g4)

i_type_5    = input.string  ("EMA", "Type", ["SMA", "EMA", "RMA", "VMA", "VWMA"],   group=g5)
i_length5   = input.int     (200,   "Length", 1,                                    group=g5)
i_source5   = input         (close, "Source",                                       group=g5)
i_offset5   = input.int     (0,     "Offset",                                       group=g5)

//#endregion


//--------------------------------------------------------------------
//#region                       Functions 
//--------------------------------------------------------------------

// @function Get the Moving Average (MA)
// @returns float
f_getMa(string _type, float _source, _length) =>
    switch _type
        "SMA"   => ta.sma(_source, _length)
        "EMA"   => ta.ema(_source, _length)
        "RMA"   => ta.rma(_source, _length)
        "WMA"   => ta.wma(_source, _length)
        "VWMA"  => ta.vwma(_source, _length)

//#endregion


//--------------------------------------------------------------------
//#region                         Logic
//--------------------------------------------------------------------

ma1 = f_getMa(i_type_1, i_source1, i_length1)
ma2 = f_getMa(i_type_2, i_source2, i_length2)
ma3 = f_getMa(i_type_3, i_source3, i_length3)
ma4 = f_getMa(i_type_4, i_source4, i_length4)
ma5 = f_getMa(i_type_5, i_source5, i_length5)

//#endregion


//--------------------------------------------------------------------
//#region                   Plotting & styling
//--------------------------------------------------------------------

plot(ma1, "#1", DEFAULT_COLOR1, DEFAULT_LINEWIDTH, offset=i_offset1)
plot(ma2, "#2", DEFAULT_COLOR2, DEFAULT_LINEWIDTH, offset=i_offset2)
plot(ma3, "#3", DEFAULT_COLOR3, DEFAULT_LINEWIDTH, offset=i_offset3)
plot(ma4, "#4", DEFAULT_COLOR4, DEFAULT_LINEWIDTH, offset=i_offset4)
plot(ma5, "#5", DEFAULT_COLOR5, DEFAULT_LINEWIDTH, offset=i_offset5)

//#endregion