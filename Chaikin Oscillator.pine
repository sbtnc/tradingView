// This source code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// Â© sbtnc
// Created: 2019-05-19
// Last modified: 2022-03-09
// Version 2.0

// @version=5
indicator("Chaikin Oscillator", "Chaikin Osc")

//--------------------------------------------------------------------
//                             Constants
//--------------------------------------------------------------------

COLOR_NEGATIVE  = #ff4e3e
COLOR_POSITIVE  = #3fbe53
COLOR_NEUTRAL   = #656565
TRANSP_AREA     = 92
TRANSP_OSC      = 20
TRANSP_ZERO     = 100

//--------------------------------------------------------------------
//                               Inputs
//--------------------------------------------------------------------

i_fastLength    = input.int (3, "Fast Length", 1)
i_slowLength    = input.int (10, "Slow Length", 1)

//--------------------------------------------------------------------
//                                Logic
//--------------------------------------------------------------------

osc = ta.ema(ta.accdist, i_fastLength) - ta.ema(ta.accdist, i_slowLength)

isPositive = osc > 0

//--------------------------------------------------------------------
//                          Plotting & styling
//--------------------------------------------------------------------

zero        = plot(0,   "Zero",                 color.new(COLOR_NEUTRAL, TRANSP_ZERO))
chaikinOsc  = plot(osc, "Chaikin Oscillator",   color.new(COLOR_NEUTRAL, TRANSP_OSC))

c_fill = isPositive ? COLOR_POSITIVE : COLOR_NEGATIVE
fill(zero, chaikinOsc, color.new(c_fill, TRANSP_AREA), "Area")
